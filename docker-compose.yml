services:
  app:
    # 1. Identity: Consistent naming across all environments
    container_name: java-backend

    # 2. Build Strategy: The Single Source of Truth
    # We use the same 'Dockerfile' (Layered JLink) for Dev, Test, Staging, and Prod.
    build:
      context: .
      dockerfile: Dockerfile

    # 3. Internal Networking:
    # We expose port 8080 to other containers (like a DB),
    # but we DO NOT map it to the host machine here.
    expose:
      - "8080"

    # 4. Common: Always on this network
    networks:
      - app-network

    # 5. Shared Config:
    # Basic environment variables common to all (e.g., App Name, Timezone)
    environment:
      - APP_NAME=DockerCompleteTutorial
      - TZ=UTC

networks:
  app-network:
    driver: bridge